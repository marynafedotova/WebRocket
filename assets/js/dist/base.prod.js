"use strict";var urlMonoBank="https://api.monobank.ua/bank/currency",usdToUahRate=37,cacheDuration=3e5;function fetchCurrencyRate(){var e=localStorage.getItem("usdToUahRate"),t=localStorage.getItem("usdToUahRateTime"),o=Date.now();return e&&t&&o-t<cacheDuration?(usdToUahRate=parseFloat(e),Promise.resolve()):fetch(urlMonoBank).then(function(e){if(!e.ok)throw new Error("Ошибка загрузки курса валют");return e.json()}).then(function(e){var t=e.find(function(e){return 840===e.currencyCodeA});t&&t.rateSell&&(usdToUahRate=t.rateSell,localStorage.setItem("usdToUahRate",usdToUahRate),localStorage.setItem("usdToUahRateTime",o))}).catch(function(e){console.error("Ошибка получения курса валют:",e)})}function updateProductPrices(){fetchCurrencyRate().then(function(){document.querySelectorAll(".product-price").forEach(function(e){var t,o,n=(n=e.getAttribute("data-price-usd")||e.textContent.replace("USD","").trim()).replace(",","."),a=parseFloat(n);isNaN(a)||void 0===usdToUahRate||(t=Math.ceil(a*usdToUahRate),(o=e.querySelector(".price-uah"))&&(o.textContent="".concat(t," грн")))}),document.querySelectorAll(".product-title-item.price").forEach(function(e){var t,o,n,a=e.querySelector(".product-price"),r=e.querySelector(".product-price-uah");a&&r&&(t=(t=a.textContent.replace("USD","").trim()).replace(",","."),o=parseFloat(t),isNaN(o)||void 0===usdToUahRate||(n=(o*usdToUahRate).toFixed(2),r.textContent="".concat(n," грн")))})})}document.addEventListener("DOMContentLoaded",function(){var e,t,o,n=document.querySelector(".product-price");n&&(e=n.dataset.priceUsd.replace(",","."),t=Math.round(parseFloat(e)),(o=n.querySelector(".price-usd"))&&(o.textContent=t))}),document.addEventListener("DOMContentLoaded",updateProductPrices);var header=document.querySelector("header");window.addEventListener("scroll",function(){30<window.scrollY?header.classList.add("scrolled"):header.classList.remove("scrolled")}),document.getElementById("hamb-btn").addEventListener("click",function(){document.body.classList.toggle("open-mobile-menu")}),document.getElementById("hamb-btn-mobile").addEventListener("click",function(){document.body.classList.toggle("open-mobile-menu")}),document.addEventListener("DOMContentLoaded",function(){var e,t=document.getElementById("year");t?(e=(new Date).getFullYear(),t.textContent=e):console.error("Элемент с ID 'year' не найден!")}),(new WOW).init();var scrollToTopBtn=document.getElementById("scrollToTopBtn");function showCartModal(){var e=document.getElementById("cartModal"),t=document.querySelector(".overlay");e&&t?(console.log("Показываем модальное окно"),e.classList.remove("hidden"),t.style.display="block"):console.error("Модальное окно или затемняющий фон не найдены!")}function closeCartModal(){var e=document.getElementById("cartModal"),t=document.querySelector(".overlay");e&&t?(e.classList.add("hidden"),t.style.display="none",document.body.style.overflow=""):console.error("Модальное окно или затемняющий фон не найдены!")}window.onscroll=function(){100<document.body.scrollTop||100<document.documentElement.scrollTop?scrollToTopBtn.style.display="block":scrollToTopBtn.style.display="none"},scrollToTopBtn.onclick=function(){window.scrollTo({top:0,behavior:"smooth"})},document.addEventListener("DOMContentLoaded",function(){var t=document.querySelectorAll(".info-tab"),o=document.querySelectorAll(".info-content");t.forEach(function(e){e.addEventListener("click",function(){t.forEach(function(e){return e.classList.remove("active")}),o.forEach(function(e){return e.classList.remove("active")}),e.classList.add("active"),document.querySelector(".".concat(e.id,"-info")).classList.add("active")})})}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".add-to-cart").forEach(function(a){a.addEventListener("click",function(){var e=this.closest(".product-card"),t=e?e.querySelector(".product-image"):null,o=a.getAttribute("data-photo")||(t?t.getAttribute("src"):"/static/assets/img/image_not_foud.jpg"),n={id:a.getAttribute("data-id"),price:a.getAttribute("data-price"),name:a.getAttribute("data-name"),photo:o,quantity:1};console.log("Додаємо товар у кошик:",n),function(t){var e=JSON.parse(sessionStorage.getItem("cart"))||[];if(e.find(function(e){return e.id===t.id}))return toast.error("Цей товар вже є в кошику!");e.push(Object.assign({},t,{quantity:1})),sessionStorage.setItem("cart",JSON.stringify(e)),console.log("Корзина оновлена:",e),showCartModal()}(n)})})}),document.getElementById("continueShopping").addEventListener("click",function(e){e.preventDefault(),closeCartModal()}),document.addEventListener("DOMContentLoaded",function(){setTimeout(function(){var e,t=document.getElementById("feedback_form"),c=document.getElementById("exampleInputNameFormFooter"),d=document.getElementById("exampleInputTelFormFooter");t&&c&&d?(t.addEventListener("submit",function(e){e.preventDefault();var t,o,n=c.value.trim(),a=d.value.trim(),r=[];c.classList.remove("is-invalid"),d.classList.remove("is-invalid"),""===n?(r.push("Введіть, будь ласка, Ваше ім'я"),c.classList.add("is-invalid")):n.length<2&&(r.push("Ваше ім'я занадто коротке"),c.classList.add("is-invalid")),(""===a||a.length<17)&&(r.push("Введіть, будь ласка, правильний номер телефону"),d.classList.add("is-invalid")),0<r.length?toast.error(r.join(". ")):(t="<b>Ім'я: </b> ".concat(n,"\r\n<b>Телефон: </b>").concat(a),o="https://api.telegram.org/bot".concat("8046931960:AAHhJdRaBEv_3zyB9evNFxZQlEdiz8FyWL8","/sendMessage?chat_id=").concat("-1002278785620","&text=").concat(encodeURIComponent(t),"&parse_mode=HTML"),fetch(o,{method:"POST"}).then(function(e){return e.json()}).then(function(e){e.ok?(c.value="",d.value="",toast.success("Ваше повідомлення успішно надіслано.")):toast.error("Сталася помилка.")}).catch(function(e){toast.error("Помилка: "+e.message)}))}),d.addEventListener("input",function(e){var t=e.target.value.replace(/\D/g,"");t.startsWith("38")||(t="38"+t),12<t.length&&(t=t.substring(0,12));var o="+38";2<t.length&&(o+=" ("+t.substring(2,5)),5<t.length&&(o+=") "+t.substring(5,8)),8<t.length&&(o+="-"+t.substring(8,10)),10<t.length&&(o+="-"+t.substring(10,12)),e.target.value=o}),c.addEventListener("input",function(e){e.target.value=e.target.value.replace(/[^A-Za-zА-Яа-яІіЇїЄє']/g,"")}),(e=document.getElementById("year"))&&(e.textContent=(new Date).getFullYear())):console.error("Ошибка: форма или поля не найдены!")},500)});